<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 配置总结 | lemonYo的成长点滴</title>
    <meta name="description" content="记录学习工作中的点点滴滴，感受自己的每一次成长">
    
    
    <link rel="preload" href="/web-source/assets/css/0.styles.75e30d82.css" as="style"><link rel="preload" href="/web-source/assets/js/app.4ea1a2f8.js" as="script"><link rel="preload" href="/web-source/assets/js/2.b78860cf.js" as="script"><link rel="preload" href="/web-source/assets/js/11.0d11a585.js" as="script"><link rel="prefetch" href="/web-source/assets/js/10.691ce30b.js"><link rel="prefetch" href="/web-source/assets/js/12.dac0ff83.js"><link rel="prefetch" href="/web-source/assets/js/13.c81fca88.js"><link rel="prefetch" href="/web-source/assets/js/14.09456cb3.js"><link rel="prefetch" href="/web-source/assets/js/3.f48b7bc9.js"><link rel="prefetch" href="/web-source/assets/js/4.2f35b444.js"><link rel="prefetch" href="/web-source/assets/js/5.f8f91743.js"><link rel="prefetch" href="/web-source/assets/js/6.48036b28.js"><link rel="prefetch" href="/web-source/assets/js/7.d515e889.js"><link rel="prefetch" href="/web-source/assets/js/8.cbf05c01.js"><link rel="prefetch" href="/web-source/assets/js/9.59b58c01.js">
    <link rel="stylesheet" href="/web-source/assets/css/0.styles.75e30d82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-source/" class="home-link router-link-active"><!----> <span class="site-name">lemonYo的成长点滴</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  js相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue and react
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小程序
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  node相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webComponents
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/LemonYo/web-source" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  js相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue and react
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小程序
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  node相关
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://lemonyo.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webComponents
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/LemonYo/web-source" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/web-source/base/" class="sidebar-link">纸上得来总觉浅，绝知此事要躬行</a></li><li><a href="/web-source/base/webpack.html" class="active sidebar-link">webpack 配置总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_1-安装webpack-4-x" class="sidebar-link">1.安装webpack(4.x)</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_2-webpack-资源管理" class="sidebar-link">2. webpack 资源管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#动态生成html（html-webpack-plugin）" class="sidebar-link">动态生成html（HTML Webpack Plugin）</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#处理css（scss，less）" class="sidebar-link">处理css（scss，less）</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#编译es6-react" class="sidebar-link">编译es6, react</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#处理图片-字体文件" class="sidebar-link">处理图片,字体文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_3-管理输出" class="sidebar-link">3. 管理输出</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_4-source-map" class="sidebar-link">4.source-map</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_5-模块热替换" class="sidebar-link">5.模块热替换</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#_6-生产环境构建" class="sidebar-link">6. 生产环境构建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#js-tree-shaking" class="sidebar-link">js tree shaking</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#css-tree-shaking" class="sidebar-link">css tree shaking</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#代码压缩" class="sidebar-link">代码压缩</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#制定生产环境" class="sidebar-link">制定生产环境</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#js-css-代码分离" class="sidebar-link">js css 代码分离</a></li></ul></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#alias对文件路径优化" class="sidebar-link">alias对文件路径优化</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#使用静态资源路径publicpath（cdn）" class="sidebar-link">使用静态资源路径publicPath（CDN）</a></li><li class="sidebar-sub-header"><a href="/web-source/base/webpack.html#懒加载" class="sidebar-link">懒加载</a></li></ul></li><li><a href="/web-source/base/ssh.html" class="sidebar-link">如何管理自己的ssh Key</a></li><li><a href="/web-source/base/cli.html" class="sidebar-link">如何搭建一个前端脚手架工具</a></li><li><a href="/web-source/base/ui.html" class="sidebar-link">如何开源一个vue ui 框架</a></li><li><a href="/web-source/base/react-ui.html" class="sidebar-link">创建一个react 移动端组件库</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack-配置总结"><a href="#webpack-配置总结" aria-hidden="true" class="header-anchor">#</a> webpack 配置总结</h1> <h2 id="_1-安装webpack-4-x"><a href="#_1-安装webpack-4-x" aria-hidden="true" class="header-anchor">#</a> 1.安装webpack(4.x)</h2> <p><code>npm install webpack webpack-cli webpack-dev-server --save-dev</code></p> <p>webpack-dev-server 是开发时的本地服务器，帮助我们实时编译代码，预览修改结果。</p> <blockquote><p>Tips: 在安装一个要打包到生产环境的安装包时，你应该使用 npm install --save，如果你在安装一个用于开发环境的安装包（例如，linter, 测试库等），你应该使用 npm install --save-dev。</p></blockquote> <h2 id="_2-webpack-资源管理"><a href="#_2-webpack-资源管理" aria-hidden="true" class="header-anchor">#</a> 2. webpack 资源管理</h2> <p>webpack对html 图片，css，js，文件，字体进行如何管理</p> <h3 id="动态生成html（html-webpack-plugin）"><a href="#动态生成html（html-webpack-plugin）" aria-hidden="true" class="header-anchor">#</a> 动态生成html（HTML Webpack Plugin）</h3> <p><code>npm i html-webpack-plugin --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
 
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'index_bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="处理css（scss，less）"><a href="#处理css（scss，less）" aria-hidden="true" class="header-anchor">#</a> 处理css（scss，less）</h3> <p><code>npm i style-loader css-loader postcss-loader --save-dev</code></p> <blockquote><p>style-loader 将生成的css 添加style标签插入 html head 中，css-loader 将css文件转化成commonjs 模块 允许我们 可以 import到我们的项目中，postcss-loader 允许我们使用最新的css语法。通常用于为我们的css样式添加浏览器前缀，提高兼容性。但是需要配合postcss.config.js 以及 autoprefixer package 实现</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mudule： <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实现css 添加前缀，添加 autoprefixer , 新建postcss.config.js</p> <p><code>npm i autoprefixer --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// postcss.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置 sass 文件</p> <p><code>npm i sass-loader node-sass --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mudule： <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置 less 文件</p> <p><code>npm i less-loader less --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mudule： <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="编译es6-react"><a href="#编译es6-react" aria-hidden="true" class="header-anchor">#</a> 编译es6, react</h3> <p>转化es6 通常用babel</p> <p><code>npm i babel-loader @babel/core @babel/preset-env --save-dev</code></p> <blockquote><p>babel-loader webpack处理的js的加载器，@babel/core 是 babel 的 核心库，@babel/preset-env 允许我们用 es6 更高标准的的语法</p></blockquote> <p>通用配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// wepack.js</span>
moule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> babel<span class="token operator">-</span>loader
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>解析 react jsx 语法</p> <p><code>npm i react react-router-dom react-dom --save</code></p> <p><code>npm i @babel/preset-react --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>moule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> babel<span class="token operator">-</span>loader
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span> <span class="token string">'@babel/preset-react'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>添加polyfill，解决低版本浏览器对某些语法的不支持 map，set，generator，async await promise</p> <p><code>npm i @babel/polyfill --save</code></p> <blockquote><p>因为会被编译到我们的代码中，所以是一个dependency not devDependency</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 项目的入口文件 比如main.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> or <span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 或者在webpack里配置入口的时候加上去</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry： <span class="token punctuation">[</span><span class="token string">'@babel/polyfill'</span><span class="token punctuation">,</span> <span class="token string">'./main.js'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是这会使我们的bundle 的体积增大，所以我们按需引入我们的ployfill</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .babelrc</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;useBuiltIns&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;corejs&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>扩展：如果是开发工具库，想要实现按需替换，可以使用下面下面两个工具来实现 @babel/plugin-transform-runtime避免 polyfill 污染全局变量，减小打包体积，因此更适合作为开发工具库。corejs 更适合生成bundle</p></blockquote> <p><code>npm i @babel/plugin-transform-runtime @babel/runtime --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>useBuiltIns、transform-runtime配到一起是错的，真是误人子弟。如果用useBuiltIns，就安装core-js@2到生产环境
，core-js@2相当于@babel/polyfill，可以按需加载。如果使用transform-runtime就不要配useBuiltInsor。所以开发一个项目可以这么配。
<code>npm install --save core-js@2</code></p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//.babelrc</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token string">&quot;modules&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token string">&quot;targets&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
                <span class="token string">&quot;browsers&quot;</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">&quot;&gt;1%&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">&quot;useBuiltIns&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;usage&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;syntax-dynamic-import&quot;</span><span class="token punctuation">,</span><span class="token comment">// 异步加载语法编译插件</span>
        <span class="token string">&quot;lodash&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="处理图片-字体文件"><a href="#处理图片-字体文件" aria-hidden="true" class="header-anchor">#</a> 处理图片,字体文件</h3> <p>url-loader 和 file-loader来处理静态资源，它允许我们可以支持我们使用require/import 引入资源。file-loader可以为资源生成对应的文件夹,url-loader 的作用是可以返回一个dataurl图片，当定义最小的图片字节，这样图片就可以无需从服务器请求获取，直接加载渲染。同时当大于限制的最小值，就使用file-loader打包到我们的项目中去。</p> <p><code>npm i url-loader file-loader --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|jpeg|gif)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// 文件名</span>
            outputPath：<span class="token string">'imgs/'</span>
            limit<span class="token punctuation">:</span> <span class="token number">8192</span> <span class="token comment">// 当小于8Kb时生成dataurl</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(eot|woff2?|ttf|svg)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// 文件名</span>
            outputPath：<span class="token string">'fonts/'</span>
            limit<span class="token punctuation">:</span> <span class="token number">5000</span> 
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多的文件处理翻阅对应的loader</p> <h2 id="_3-管理输出"><a href="#_3-管理输出" aria-hidden="true" class="header-anchor">#</a> 3. 管理输出</h2> <p>利用html-webpack-plugin 生成对应的html模板，并将我们生成的js， css， img，font 引入到我们的html中，在生产环境下，我们频繁跟换我们的webpack配置，为了避免dist 文件夹下的文件混乱，在bulid 的时候 建议使用 clean-webpack-plugin 清除dist文件下的旧数据</p> <p><code>npm i html-webpack-plugin clean-webpack-plugin --save-dev</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> cleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">cleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title：String<span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> String<span class="token punctuation">,</span> <span class="token comment">// 默认是 index.html</span>
      template：<span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 模板的路径</span>
      hash：<span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 防止缓存</span>
      minfy： <span class="token punctuation">{</span>
        removeAttributeQuates<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// 压缩并且去掉引号</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-source-map"><a href="#_4-source-map" aria-hidden="true" class="header-anchor">#</a> 4.source-map</h2> <p>sourceMap本质上是一种映射关系，打包出来的js文件中的代码可以映射到代码文件的具体位置,这种映射关系会帮助我们直接找到在源代码中的错误。可以直接在devtool中使用.合理的使用source-map可以帮助我们提高开发效率，更快的定位到错误位置。
生产环境和开发环境的devtool配置是不同的。我们可以在webpack.dev.js中添加devtoo</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>devtool<span class="token punctuation">:</span><span class="token string">&quot;cheap-module-eval-source-map&quot;</span><span class="token punctuation">,</span><span class="token comment">// 开发环境配置最佳实践</span>
devtool<span class="token punctuation">:</span><span class="token string">&quot;cheap-module-source-map&quot;</span><span class="token punctuation">,</span>   <span class="token comment">// 生产配置最佳实践</span>
</code></pre></div><h2 id="_5-模块热替换"><a href="#_5-模块热替换" aria-hidden="true" class="header-anchor">#</a> 5.模块热替换</h2> <p><code>npm i webpack-dev-server --save-dev</code></p> <div class="language- extra-class"><pre class="language-text"><code>// webapack.dev.js

module.exports = {
  devServer: {
    hot: true, // 开启热更新模块
    open：true， // 项目启动自动打开系统默认浏览器
    compress: true, // 是否启用gzip压缩
    host： '192.168.0.8', // 指定主机的host，
    port：'8080',
    proxy: {
      &quot;/api&quot;: {
        target: proxyIp,
        changeOrigin: true
      }
    }
  }
}
</code></pre></div><p>react: <a href="%22https://www.npmjs.com/package/react-hot-loader%22">react-hot-loader</a></p> <h2 id="_6-生产环境构建"><a href="#_6-生产环境构建" aria-hidden="true" class="header-anchor">#</a> 6. 生产环境构建</h2> <p>开发环境(development)和生产环境(production)的构建目标差异很大。在开发环境中，我们需要具有强大的、具有实时重新加载(live reloading)或热模块替换(hot module replacement)能力的 source map 和 localhost server。而在生产环境中，我们的目标则转向于关注更小的 bundle，更轻量的 source map，以及更优化的资源，以改善加载时间。由于要遵循逻辑分离，我们通常建议为每个环境编写彼此独立的 webpack 配置。</p> <h3 id="js-tree-shaking"><a href="#js-tree-shaking" aria-hidden="true" class="header-anchor">#</a> js tree shaking</h3> <p>tree shaking 是一个术语，通常用于描述移除 JavaScript 上下文中的未引用代码(dead-code)。它依赖于 ES2015 模块系统中的静态结构特性，例如 import 和 export。这个术语和概念实际上是兴起于 ES2015 模块打包工具 rollup。</p> <p>新的 webpack 4 正式版本，扩展了这个检测能力，通过 package.json 的 &quot;sideEffects&quot; 属性作为标记，向 compiler 提供提示，表明项目中的哪些文件是 &quot;pure(纯的 ES2015 模块)&quot;，由此可以安全地删除文件中未使用的部分。</p> <blockquote><p>支持es6的import模块，不支持commonjs 模块，因为commonjs 是动态引入，而es6是静态引入</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// webpack.dev.js
  optimization: {   // 开发环境时使用
        usedExports: true
    },
        
// package.json
  &quot;sideEffects&quot;: [
    &quot;*.css&quot;
  ],

// 如果在项目中使用类似 css-loader 并 import 一个 CSS 文件，则需要将其添加到 side effect 列表中，以免在生产模式中无意中将它删除
</code></pre></div><p><em><strong>注意：mode 选项设置为 production，可以自动启用 minification(代码压缩) 和 tree shaking</strong></em></p> <h3 id="css-tree-shaking"><a href="#css-tree-shaking" aria-hidden="true" class="header-anchor">#</a> css tree shaking</h3> <p><code>npm i glob-all purify-css purifycss-webpack --save-dev</code></p> <div class="language- extra-class"><pre class="language-text"><code>const PurifyCSS = require('purifycss-webpack')
const glob = require('glob-all')
plugins:[
    // 清除无用 css
    new PurifyCSS({
      paths: glob.sync([
        // 要做 CSS Tree Shaking 的路径文件
        path.resolve(__dirname, './src/*.html'), // 请注意，我们同样需要对 html 文件进行 tree shaking
        path.resolve(__dirname, './src/*.js')
      ])
    })
]

参考至链接：https://juejin.im/post/5cfe4b13f265da1bb13f26a8

</code></pre></div><h3 id="代码压缩"><a href="#代码压缩" aria-hidden="true" class="header-anchor">#</a> 代码压缩</h3> <p>默认 mode：production 自动可以代码压缩，也可以配合uglifyjs-webpack-plugin 使用</p> <p><code>npm i uglifyjs-webpack-plugin --save-dev</code></p> <div class="language- extra-class"><pre class="language-text"><code>// webpack.prod.js

const UglifyJSPlugin = require('uglifyjs-webpack-plugin ')

plugins: [
  new UglifyJSPlugin()
]

</code></pre></div><h3 id="制定生产环境"><a href="#制定生产环境" aria-hidden="true" class="header-anchor">#</a> 制定生产环境</h3> <p>许多 library 将通过与 process.env.NODE_ENV 环境变量关联，以决定 library 中应该引用哪些内容。例如，当不处于生产环境中时，某些 library 为了使调试变得容易，可能会添加额外的日志记录(log)和测试(test)。其实，当使用 process.env.NODE_ENV === 'production' 时，一些 library 可能针对具体用户的环境进行代码优化，从而删除或添加一些重要代码。我们可以使用 webpack 内置的 DefinePlugin 为所有的依赖定义这个变量：</p> <div class="language- extra-class"><pre class="language-text"><code>// 通常指定 mode：production 就可以，对于旧版本的webpack 可以通过指定

  new webpack.DefinePlugin({
    'process.env.NODE_ENV': JSON.stringify('production')
  })

</code></pre></div><h3 id="js-css-代码分离"><a href="#js-css-代码分离" aria-hidden="true" class="header-anchor">#</a> js css 代码分离</h3> <p>把代码分离到不同的 bundle 中，然后可以按需加载或并行加载这些文件。代码分离可以用于获取更小的 bundle，以及控制资源加载优先级，如果使用合理，会极大影响加载时间。</p> <h4 id="js代码分离"><a href="#js代码分离" aria-hidden="true" class="header-anchor">#</a> js代码分离</h4> <div class="language- extra-class"><pre class="language-text"><code>optimization: {
  splitChunks: {
      chunks: &quot;all&quot;,    // 只对异步引入代码起作用，设置all时并同时配置vendors才对两者起作用
      minSize: 30000,   // 引入的库大于30kb时才会做代码分割
      minChunks: 1,     // 一个模块至少被用了1次才会被分割
      maxAsyncRequests: 5,     // 同时异步加载的模块数最多是5个，如果超过5个则不做代码分割
      maxInitialRequests: 3,   // 入口文件进行加载时，引入的库最多分割出3个js文件
      automaticNameDelimiter: '~',  // 生成文件名的文件链接符
      name: true,   // 开启自定义名称效果
      cacheGroups: {  // 判断分割出的代码放到那里去
          vendors: {   // 配合chunks：‘all’使用，表示如果引入的库是在node-modules中，那就会把这个库分割出来并起名为vendors.js
              test: /[\/]node_modules[\/]/,
              priority: -10,
              filename: 'vendors.js'
          },
          default: {  // 为非node-modules库中分割出的代码设置默认存放名称
              priority: -20,
              reuseExistingChunk: true, // 避免被重复打包分割
              filename: 'common.js'
          }
      }
  }
}

</code></pre></div><h4 id="css-代码分割"><a href="#css-代码分割" aria-hidden="true" class="header-anchor">#</a> css 代码分割</h4> <p><code>npm i extract-text-webpack-plugin --save-dev</code></p> <p>它会将所有的入口 chunk(entry chunks)中引用的 *.css，移动到独立分离的 CSS 文件。因此，你的样式将不再内嵌到 JS bundle 中，而是会放到一个单独的 CSS 文件（即 styles.css）当中。 如果你的样式文件大小较大，这会做更快提前加载，因为 CSS bundle 会跟 JS bundle 并行加载。</p> <div class="language- extra-class"><pre class="language-text"><code>const ExtractTextPlugin = require('extract-text-webpack-plugin');

module.exports = {
  module: {
    rules: [
      {
        test: /\.scss$/,
        use: ExtractTextPlugin.extract({
          fallback: 'style-loader',
          //如果需要，可以在 sass-loader 之前将 resolve-url-loader 链接进来
          use: ['css-loader', 'sass-loader']
        })
      }
    ]
  },
  plugins: [
    new ExtractTextPlugin('style.css')
    //如果想要传入选项，你可以这样做：
    //new ExtractTextPlugin({
    //  filename: 'style.css'
    //})
  ]
}
</code></pre></div><p><em>网上的另一种解决方案</em></p> <p>想要分开打包我们的css文件，需要使用mini-css-extract-plugin这个插件，但是这个插件目前还不支持HMR,为了不影响开发效率，因此就在生成环境下使用该插件。
optimize-css-assets-webpack-plugin 这个插件可以帮助我们把相同的样式合并。
css-split-webpack-plugin插件可以帮我们把过大的css文件拆分</p> <p><code>npm install mini-css-extract-plugin optimize-css-assets-webpack-plugin css-split-webpack-plugin --save-dev</code></p> <div class="language- extra-class"><pre class="language-text"><code>const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const OptimizeCSSAssetsPlugin = require(&quot;optimize-css-assets-webpack-plugin&quot;);
const CSSSplitWebpackPlugin = require('css-split-webpack-plugin').default;
...
    module: {
        rules: [{
            test: /.less$/,
            exclude: /node_modules/,
            use: [MiniCssExtractPlugin.loader,
                {
                    loader: 'css-loader',
                    options: {
                        importLoaders: 2
                    }
                }, 'less-loader', 'postcss-loader']
        },
        {
            test: /.css$/,
            use: [MiniCssExtractPlugin.loader, 'css-loader', 'postcss-loader']
        }]
    },
    optimization: {
minimizer: [new OptimizeCSSAssetsPlugin({})]
},
plugins: [
new MiniCssExtractPlugin({
filename: '[name].css',
chunkFilename: '[name].chunk.css'
}),
      new CSSSplitWebpackPlugin({
            size: 4000,
            filename: '[name]-[part].[ext]'
      })
   ]
</code></pre></div><h2 id="alias对文件路径优化"><a href="#alias对文件路径优化" aria-hidden="true" class="header-anchor">#</a> alias对文件路径优化</h2> <p>extension: 指定extension之后可以不用在require或是import的时候加文件扩展名,会依次尝试添加扩展名进行匹配</p> <p>alias: 配置别名可以加快webpack查找模块的速度</p> <div class="language- extra-class"><pre class="language-text"><code>resolve: {
  extension: [&quot;&quot;, &quot;.js&quot;, &quot;.jsx&quot;],
  alias: {
    &quot;@&quot;: path.join(__dirname, &quot;src&quot;),
    pages: path.join(__dirname, &quot;src/pages&quot;),
    router: path.join(__dirname, &quot;src/router&quot;)
  }
}
  
</code></pre></div><h2 id="使用静态资源路径publicpath（cdn）"><a href="#使用静态资源路径publicpath（cdn）" aria-hidden="true" class="header-anchor">#</a> 使用静态资源路径publicPath（CDN）</h2> <p>CDN通过将资源部署到世界各地，使得用户可以就近访问资源，加快访问速度。要接入CDN，需要把网页的静态资源上传到CDN服务上，在访问这些资源时，使用CDN服务提供的URL。</p> <div class="language- extra-class"><pre class="language-text"><code>output: {
  filename: '[name].js',
  path: path.resolve(__dirname, '../dist'),
  publicPath: '//Cdn'
}
</code></pre></div><h2 id="懒加载"><a href="#懒加载" aria-hidden="true" class="header-anchor">#</a> 懒加载</h2> <p>懒加载或者按需加载，是一种很好的优化网页或应用的方式。这种方式实际上是先把你的代码在一些逻辑断点处分离开，然后在一些代码块中完成某些操作后，立即引用或即将引用另外一些新的代码块。这样加快了应用的初始加载速度，减轻了它的总体体积，因为某些代码块可能永远不会被加载。</p> <div class="language- extra-class"><pre class="language-text"><code>  import _ from 'lodash';

- async function getComponent() {
    const _ = await import(/* webpackChunkName: &quot;lodash&quot; */ 'lodash');
  }

- getComponent().then(component =&gt; {
-   document.body.appendChild(component);
- });
+ document.body.appendChild(component());

</code></pre></div><p>许多框架和类库对于如何用它们自己的方式来实现（懒加载）都有自己的建议。这里有一些例子：</p> <p>React: <a href="https://reacttraining.com/react-router/web/guides/code-splitting" target="_blank" rel="noopener noreferrer">Code Splitting and Lazy Loading<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>vue: <a href="https://alexjover.com/blog/lazy-load-in-vue-using-webpack-s-code-splitting/" target="_blank" rel="noopener noreferrer">Lazy Load in Vue using Webpack's code splitting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LemonYo/web-source/edit/master/docs/base/webpack.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/web-source/base/" class="prev router-link-active">
          纸上得来总觉浅，绝知此事要躬行
        </a></span> <span class="next"><a href="/web-source/base/ssh.html">
          如何管理自己的ssh Key
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/web-source/assets/js/app.4ea1a2f8.js" defer></script><script src="/web-source/assets/js/2.b78860cf.js" defer></script><script src="/web-source/assets/js/11.0d11a585.js" defer></script>
  </body>
</html>
